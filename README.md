# UBot - YouTube Audio Bot

![](img/readme-cover.png)

Telegram-бот для скачивания аудио с YouTube. Конвертирует видео в MP3 и отправляет пользователям.

> Версия 1.0.0

## Бот в Telegram
![QR](img/readme-qr.png)

[Ссылка на бота](https://t.me/utube2tg_bot)


## Возможности

- Скачивание аудио с YouTube по ссылке
- Конвертация в MP3 (128 kbps)
- Автоматическая разбивка больших файлов на части
- Кэширование скачанных видео — повторные запросы выполняются мгновенно из кэша Telegram
- База данных SQLite для хранения пользователей и статистики
- Управление доступом администратором
- Статистика использования бота
- Обложки для аудиофайлов
- Очередь обработки запросов
- Асинхронная архитектура для высокой производительности

## Установка

### Требования

- Python 3.11+
- FFmpeg

### Зависимости

```bash
pip install -r requirements.txt
```

### Переменные окружения

Создайте файл `.env`:

```env
BOT_TOKEN=XXXXX
ADMIN_ID=XXXXX
```


## Запуск

### Docker Compose

```bash
docker-compose up -d
```

### Команды

- `/start` — начать работу с ботом
- `/ping` — проверить работоспособность бота
- `/stats` — статистика использования (только для администратора)

## Особенности

- **Кэширование**: Бот сохраняет file_id из Telegram и использует их при повторных запросах. Это значительно экономит трафик и время обработки.
- **База данных**: Используется SQLite для хранения пользователей, кэша и статистики. База данных автоматически создаётся при первом запуске.
- **Статистика**: Администратор может просматривать общую статистику использования бота через команду `/stats`.
- **Обложки**: Поддерживается использование обложек для аудиофайлов (файлы `cover.png` или `cover.jpeg` в корне проекта).

## Структура проекта

- `bot.py` — основная логика бота
- `tools.py` — функции скачивания и обработки аудио
- `database.py` — работа с базой данных SQLite
- `docker-compose.yml` — конфигурация Docker
- `Dockerfile` — образ Docker с Python 3.11 и FFmpeg
- `data/` — директория для базы данных (создаётся автоматически)

## Технические детали

- Максимальный размер одного файла в Telegram: 50 MB
- Битрейт аудио: 128 kbps
- Формат выходного файла: MP3
- База данных: SQLite
- Бот автоматически очищает временные файлы после отправки

## Лицензия

Проект распространяется под лицензией **MIT License with Non-Commercial Use Restriction**. Подробности см. в файле [LICENSE](LICENSE).

## Автор

almostkitty